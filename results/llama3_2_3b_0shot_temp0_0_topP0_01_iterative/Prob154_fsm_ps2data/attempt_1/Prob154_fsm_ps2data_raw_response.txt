Here is the Verilog module that implements the finite state machine and datapath:

```verilog
module TopModule(
    input clk,
    input [7:0] in,
    input reset,
    output [23:0] out_bytes,
    output done
);

reg [2:0] state;
reg [7:0] byte1, byte2, byte3;
reg [23:16] message;

always @(posedge clk) begin
    if (reset) begin
        state <= 0;
        byte1 <= 0;
        byte2 <= 0;
        byte3 <= 0;
        message <= 0;
        done <= 0;
    end else begin
        // Discard bytes until we see one with in[3]=1
        if (in[3] == 1) begin
            state <= 0;
            byte1 <= in[7:0];
            byte2 <= 0;
            byte3 <= 0;
            message <= 0;
            done <= 0;
        end else if (state == 0 && byte1 != 0) begin
            state <= 1;
            byte2 <= in[7:0];
            byte3 <= 0;
            message <= 0;
            done <= 0;
        end else if (state == 1 && byte2 != 0) begin
            state <= 2;
            byte3 <= in[7:0];
            message <= {byte1, byte2};
            done <= 0;
        end else if (state == 2 && byte3 != 0) begin
            state <= 0;
            byte1 <= 0;
            byte2 <= 0;
            byte3 <= 0;
            message <= message;
            done <= 1;
        end
    end
end

assign out_bytes = message;

endmodule
```

This module uses a finite state machine to track the current state and the received bytes. The `state` variable keeps track of the current state, which can be either 0 (discarding bytes), 1 (waiting for byte 2), or 2 (waiting for byte 3). The `byte1`, `byte2`, and `byte3` variables keep track of the received bytes.

When a message is detected, the `message` variable is assigned the value of the three bytes. The `done` signal is asserted when all three bytes have been received.

The `out_bytes` output is assigned the value of the `message` variable whenever the `done` signal is asserted.