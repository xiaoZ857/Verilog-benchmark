assign state = next_state;