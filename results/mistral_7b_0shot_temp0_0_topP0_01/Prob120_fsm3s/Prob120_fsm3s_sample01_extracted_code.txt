 ```verilog
reg state_reg; // FSM current state
always @(posedge clk or posedge reset) begin
    if (reset)
        state_reg <= 0; // Reset to state A
    else if (state_reg == 0) begin // Current state is A
        if (in == 0)
            state_reg <= 1; // Next state is B, output remains 0
        else
            state_reg <= 2; // Next state is B, output remains 0
    end else if (state_reg == 1) begin // Current state is B
        if (in == 0)
            state_reg <= 1; // Next state is B, output remains 0
        else
            state_reg <= 2; // Next state is C, output remains 0
    end else if (state_reg == 2) begin // Current state is C
        state_reg <= 3; // Next state is A, output remains 0
    end else if (state_reg == 3) begin // Current state is D
        state_reg <= 2; // Next state is C, output becomes 1
        out <= 1;
    end
end

assign out = state_reg == 0 ? 0 : 1; // Assign output based on the current state

endmodule