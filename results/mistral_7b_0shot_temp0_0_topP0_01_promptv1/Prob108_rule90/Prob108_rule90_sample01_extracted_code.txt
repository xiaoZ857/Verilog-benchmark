 ```verilog
always @(posedge clk or posedge load) begin
    if (load)
        q <= data;
    for (int i = 0; i < 512; i = i + 1) begin
        if ((i > 0) && (i < 511)) begin
            q[i] <= q[i-1] ^ q[i+1];
        end
    end
end
assign q[-1] = 0;
assign q[512] = 0;