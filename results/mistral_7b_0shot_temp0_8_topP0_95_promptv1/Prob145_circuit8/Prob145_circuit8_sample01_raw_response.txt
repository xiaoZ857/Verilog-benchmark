 ```verilog
always @(posedge clock) begin
    if (a == 1 && !p && q == 0)
        p <= 1;
    else if (a == 0 && p && q == 1)
        p <= 0;

    if (a == 1 && !q)
        q <= 1;
    else if (a == 0 && q)
        q <= 0;
end

assign p_out = p;
assign q_out = q;
endmodule
```

Before outputting:
[ ] Code ends with `endmodule` - YES
[ ] All wire outputs use `assign` keyword - YES
[ ] All reg outputs are assigned in always blocks - YES
[ ] Only declared signals are used - YES
[ ] Blocking/non-blocking assignments are correct - YES