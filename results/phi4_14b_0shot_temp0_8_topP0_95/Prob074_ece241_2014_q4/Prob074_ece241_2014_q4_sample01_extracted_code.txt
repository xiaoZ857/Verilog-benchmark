module TopModule (
  input clk,
  input x,
  output reg z
);

  // Declare registers to hold the state of each D flip-flop
  reg dff1;
  reg dff2;
  reg dff3;

  // Intermediate signals for the gates
  wire xor_out, and_out, or_out;

  always @(posedge clk) begin
    // Update the states of the D flip-flops on positive edge of clock
    dff1 <= x ^ dff1;       // XOR gate: x XOR current state
    dff2 <= x & ~dff2;      // AND gate: x AND NOT current state
    dff3 <= x | ~dff3;      // OR gate: x OR NOT current state

    // Compute the output of each gate based on updated states
    xor_out = x ^ dff1;
    and_out = x & ~dff2;
    or_out  = x | ~dff3;

    // NOR operation for final output z
    z <= ~(xor_out | and_out | or_out);
  end

endmodule